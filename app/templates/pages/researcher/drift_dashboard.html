{% extends "base.html" %}

{% block title %}Drift Detection Dashboard{% endblock %}

{% block content %}
<div class="container-fluid">
    <div class="row">
        <div class="col-12">
            <h2 class="mb-4">Drift Detection Dashboard</h2>
            <!-- The drift dashboard will be dynamically created by JavaScript -->
            <div id="driftDashboardContainer" class="drift-dashboard">
                <!-- Content will be inserted here by drift_visualization.js -->
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
    <!-- Load Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation"></script>
    
    <!-- Load our visualization scripts -->
    <script src="{{ url_for('static', path='js/drift_visualization.js') }}"></script>
    
    <!-- Initialize the dashboard -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize the drift visualization dashboard
            try {
                const driftDashboard = new DriftVisualization('driftDashboardContainer');
                console.log('Drift detection dashboard initialized');
            } catch (error) {
                console.error('Error initializing drift dashboard:', error);
            }
        });
    </script>
    
    {% if extra_js %}
        {% for js in extra_js %}
            <script src="{{ js }}"></script>
        {% endfor %}
    {% endif %}
{% endblock %}
